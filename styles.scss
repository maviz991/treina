/* --- Estilo do Card Bloqueado (sem alterações) --- */
.module-shortcut-card.locked {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
  position: relative;
  filter: grayscale(80%);
}
/* Adiciona um ícone de cadeado no canto superior direito do card */
.module-shortcut-card.locked::after {
  content: ''; /* Conteúdo fica vazio */
  position: absolute;
  top: 15px;
  right: 15px;
  width: 18px; /* Tamanho do ícone */
  height: 18px;
  
  /* A MÁGICA DO SVG EMBUTIDO: */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'%3E%3C/rect%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'%3E%3C/path%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}



    // ===================================================================
    // INÍCIO: LÓGICA PARA CARDS DE ATALHO (BLOQUEIO E CLIQUE)
    // ===================================================================
    document.addEventListener('DOMContentLoaded', function() {
      console.log("--- INICIANDO DEBUG DO SCRIPT DE BLOQUEIO v2.0 ---");
      
      const shortcutCards = document.querySelectorAll('.module-shortcut-card');
      if (shortcutCards.length === 0) {
          console.log("AVISO: Nenhum .module-shortcut-card encontrado na página.");
      } else {
          console.log(`Encontrados ${shortcutCards.length} cards de atalho.`);
      }
  
      shortcutCards.forEach((card, index) => {
          const sectionNumber = card.getAttribute('data-section-target');
          if (!sectionNumber) {
              console.log(`Card #${index+1}: Sem atributo data-section-target.`);
              return;
          }
          console.log(`%c--- Verificando Card #${index+1} (para Seção ${sectionNumber}) ---`, 'color: blue;');
  
          // TENTATIVA 1: Procurar pelo <li> da seção (ID #section-X)
          let moodleSection = document.querySelector(`#section-${sectionNumber}`);
          
          if (moodleSection) {
              console.log(`  Tentativa 1 SUCESSO: Encontrou a seção por ID #section-${sectionNumber}.`);
          } else {
              console.log(`  Tentativa 1 FALHOU: Não encontrou a seção por ID #section-${sectionNumber}.`);
              
              // TENTATIVA 2: Procurar pelo cabeçalho da seção (atributo data-number)
              moodleSection = document.querySelector(`.course-section-header[data-number='${sectionNumber}']`);
              
              if (moodleSection) {
                  console.log(`  Tentativa 2 SUCESSO: Encontrou o cabeçalho da seção por [data-number='${sectionNumber}'].`);
              } else {
                  console.log(`  Tentativa 2 FALHOU: Também não encontrou o cabeçalho da seção.`);
              }
          }
          
          // Se encontramos a seção de alguma forma, procuramos o cadeado
          if (moodleSection) {
              const lockIcon = moodleSection.querySelector('.icon.fa-lock');
              if (lockIcon) {
                  console.log(`    CADEADO ENCONTRADO! Aplicando classe .locked.`);
                  card.classList.add('locked');
              } else {
                  console.log(`    Cadeado NÃO encontrado dentro da seção encontrada.`);
              }
          } else {
              console.log(`  Não foi possível encontrar a Seção ${sectionNumber} na página.`);
          }
      });
  
      console.log("--- FIM DO DEBUG ---");
  

  const moduleLinks = document.querySelectorAll('.js-module-link:not(.locked)');
  moduleLinks.forEach(link => {
      link.addEventListener('click', function(e) {
          e.preventDefault();
          const sectionNumber = this.getAttribute('data-section-target');
          if (!sectionNumber) return;
          const sectionTitleLink = document.querySelector(`#coursecontentsection${sectionNumber} a, .section[data-sectionid='${sectionNumber}'] a`);
          if (sectionTitleLink) {
              sectionTitleLink.click();
          }
          const anchorTarget = document.querySelector(this.getAttribute('href'));
          if (anchorTarget) {
              setTimeout(() => {
                  anchorTarget.scrollIntoView({
                      behavior: 'smooth',
                      block: 'start'
                  });
              }, 100);
          }
      });
  });
  // ===================================================================
  // FIM: LÓGICA PARA CARDS DE ATALHO
  // ===================================================================

}); // Fim do 'DOMContentLoaded'



/* =================================================================== */
/*             COMPONENTE: GRADE DE ATALHOS PARA MÓDULOS               */
/* =================================================================== */

/* --- O Contêiner da Grade de Atalhos --- */
.module-shortcut-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 40px;
  margin-bottom: 40px;
}

/* --- O Card de Atalho Individual --- */
.module-shortcut-card {
  position: relative; /* ESSENCIAL: Torna o card um ponto de referência para o cadeado */
  display: block;
  background-color: #ffffff;
  border: 1px solid #e8e8e8;
  border-radius: 8px;
  padding: 20px;
  text-align: left;
  text-decoration: none;
  color: #333;
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
}
.module-shortcut-card:not(.locked):hover { /* Efeito de hover apenas para cards NÃO bloqueados */
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
  border-color: #ff1100;
  color: #333;
  text-decoration: none;
}

.shortcut-icon {
  color: #ff1100;
  margin-bottom: 15px;
}
.shortcut-icon svg {
  width: 28px;
  height: 28px;
}

.shortcut-title {
  font-family: 'Axiforma', 'Montserrat', sans-serif;
  font-weight: 700;
  font-size: 1.1em;
  color: #000;
  margin: 0;
}

/* --- ESTILOS PARA O CARD BLOQUEADO --- */
.module-shortcut-card.locked {
  background-color: #f8f9fa; /* Fundo cinza claro para indicar inatividade */
  opacity: 0.7; /* Deixa o card semi-transparente */
  cursor: not-allowed; /* Muda o cursor do mouse */
  color: #6c757d; /* Cor do texto mais apagada */
}
.module-shortcut-card.locked .shortcut-icon {
  color: #6c757d; /* Ícone também fica cinza */
}
.module-shortcut-card.locked .shortcut-title {
  color: #6c757d; /* Título também fica cinza */
}

/* O cadeado */
.module-shortcut-card.locked::after {
  content: '';
  position: absolute;
  top: 15px;
  right: 15px;
  width: 18px;
  height: 18px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236c757d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'%3E%3C/rect%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'%3E%3C/path%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 2; /* Garante que o cadeado fique em cima de tudo */
}